"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6995],{6995:(j,g,l)=>{l.r(g),l.d(g,{HomePageModule:()=>I});var d=l(177),y=l(4341),r=l(4742),p=l(70),m=l(467),t=l(4438);function h(n,i){1&n&&t.nrm(0,"div")}function f(n,i){1&n&&t.nrm(0,"div")}let v=(()=>{var n;class i{constructor(){this.combatBlock=null,this.canvas=null}ngOnInit(){console.log(this.combatBlock)}attack(){}dodge(){}inventory(){}}return(n=i).\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.VBU({type:n,selectors:[["app-combat"]],decls:17,vars:2,consts:[["src","assets/darryn.png","alt",""],["color","warning"],["color","success"],[3,"click"],[4,"ngIf"]],template:function(e,o){1&e&&(t.j41(0,"ion-card")(1,"ion-card-content"),t.nrm(2,"img",0),t.j41(3,"div")(4,"p",1),t.EFF(5,"Enemy Health: 100"),t.k0s(),t.j41(6,"p",2),t.EFF(7,"Player Health: 100"),t.k0s()(),t.j41(8,"div")(9,"ion-item",3),t.bIt("click",function(){return o.attack()}),t.EFF(10,"Attack"),t.k0s(),t.j41(11,"ion-item",3),t.bIt("click",function(){return o.dodge()}),t.EFF(12,"Dodge"),t.k0s(),t.j41(13,"ion-item",3),t.bIt("click",function(){return o.inventory()}),t.EFF(14,"Inventory"),t.k0s()(),t.DNE(15,h,1,0,"div",4)(16,f,1,0,"div",4),t.k0s()()),2&e&&(t.R7$(15),t.Y8G("ngIf",!1),t.R7$(),t.Y8G("ngIf",!1))},dependencies:[d.bT,r.b_,r.I9,r.uz],styles:["*[_ngcontent-%COMP%]{color:#fff}"]}),i})();var S=l(1413);let k=(()=>{var n;class i{constructor(){this.game=[],this.items=[],this.defaultPlayerStats={health:100,AC:13,strength:16,dexterity:14,constitution:10,intelligence:12,wisdom:12},this.inventory=new S.B}intialiseGame(){var e=this;return(0,m.A)(function*(){try{yield fetch("assets/game.json").then(o=>o.json()).then(o=>{if(e.game=o,console.log(e.game),e.game.length<=0)throw new Error("No game data found");let a=String(localStorage.getItem("gameState"));return e.gameState=JSON.parse(a),e.gameState||(e.gameState={currentStory:0,inventory:[],playerStats:e.defaultPlayerStats}),e.inventory.next(e.gameState.inventory),localStorage.setItem("gameState",JSON.stringify(e.gameState)),e.gameState})}catch(o){console.log("err: ",o)}})()}getInventory(){return this.gameState.inventory}addItem(e){let o=this.items.find(a=>a.id===e);o&&(this.gameState.inventory.push(o),this.inventory.next(this.gameState.inventory),this.saveGameState())}loadNextScene(e){let o;return o=this.game.find(a=>a.id==e),o?(this.gameState.currentStory=o.id,this.saveGameState(),o):{id:0,title:"Empty Story Block",pathway:"A blank moment in Darryn's journey.",description:"This block is intentionally left blank for future use.",items:[],options:[{name:"start",description:"Start Darryn's adventure",collectedItems:[],targetStoryBlock:1}]}}saveGameState(){localStorage.setItem("gameState",JSON.stringify(this.gameState))}resetGame(){localStorage.removeItem("gameState"),this.gameState=void 0,this.inventory.next([]),this.game=[],this.items=[]}readJsonData(e){var o=this;return(0,m.A)(function*(){yield fetch(e).then(c=>c.json()).then(c=>{o.game=c})})()}}return(n=i).\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"}),i})();function b(n,i){if(1&n){const s=t.RV6();t.j41(0,"ion-item",9),t.bIt("click",function(){const o=t.eBV(s).$implicit,a=t.XpG(2);return t.Njj(a.onOptionSelected(o.targetStoryBlock))}),t.EFF(1),t.k0s()}if(2&n){const s=i.$implicit;t.R7$(),t.Lme(" ",s.name," - ",s.description," ")}}function C(n,i){if(1&n&&(t.j41(0,"div"),t.DNE(1,b,2,2,"ion-item",8),t.k0s()),2&n){const s=t.XpG();t.R7$(),t.Y8G("ngForOf",s.storyBlock.options)}}const _=[{path:"",component:(()=>{var n;class i{constructor(e,o){this.gameService=e,this.modalController=o,this.activateOptions=!1,this.storyBlock={id:0,title:"Empty Story Block",pathway:"A blank moment in Darryn's journey.",description:"This block is intentionally left blank for future use.",items:[],options:[{name:"start",description:"Start Darryn's adventure",collectedItems:[],targetStoryBlock:1}]},this.displayedText="",this.typingSpeed=25}ngOnInit(){var e=this;return(0,m.A)(function*(){yield e.gameService.intialiseGame();let o=e.gameService.loadNextScene(e.gameService.gameState.currentStory);e.showStoryBlock(o)})()}showStoryBlock(e){this.activateOptions=!1,this.storyBlock=e,this.displayedText="",this.typeText(this.storyBlock.description)}typeText(e){var o=this;return(0,m.A)(function*(){let a=0;const c=()=>{var u;if(a<e.length)o.displayedText+=e.charAt(a),a++,setTimeout(c,o.typingSpeed);else if(o.activateOptions=!0,null!==(u=o.storyBlock)&&void 0!==u&&u.isCombat)return void setTimeout(()=>{o.openCombat(o.storyBlock)},1e3)};yield c()})()}onOptionSelected(e){if(this.activateOptions){let o=this.gameService.loadNextScene(e);this.storyBlock=o,this.showStoryBlock(this.storyBlock)}}openCombat(e){var o=this;return(0,m.A)(function*(){const a=yield o.modalController.create({component:v,componentProps:{combatBlock:e}});yield a.present(),a.onDidDismiss().then(c=>{console.log(c)})})()}resetGame(){this.gameService.resetGame(),this.ngOnInit()}}return(n=i).\u0275fac=function(e){return new(e||n)(t.rXU(k),t.rXU(r.W3))},n.\u0275cmp=t.VBU({type:n,selectors:[["app-home"]],decls:22,vars:6,consts:[[3,"translucent"],["slot","end"],["color","secondary",3,"click"],["name","refresh-outline","slot","start"],[3,"fullscreen"],["collapse","condense"],["size","large"],[4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],[3,"click"]],template:function(e,o){1&e&&(t.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),t.EFF(3," Game"),t.k0s(),t.j41(4,"ion-buttons",1)(5,"ion-button",2),t.bIt("click",function(){return o.resetGame()}),t.nrm(6,"ion-icon",3),t.EFF(7," Reset"),t.k0s()()()(),t.j41(8,"ion-content",4)(9,"ion-header",5)(10,"ion-toolbar")(11,"ion-title",6),t.EFF(12,"home"),t.k0s()()(),t.j41(13,"ion-card")(14,"ion-card-header")(15,"ion-card-subtitle"),t.EFF(16),t.k0s(),t.j41(17,"ion-card-title"),t.EFF(18),t.k0s()(),t.j41(19,"ion-card-content"),t.EFF(20),t.k0s()(),t.DNE(21,C,2,1,"div",7),t.k0s()),2&e&&(t.Y8G("translucent",!0),t.R7$(8),t.Y8G("fullscreen",!0),t.R7$(8),t.SpI(" ",o.storyBlock.pathway," "),t.R7$(2),t.SpI(" ",o.storyBlock.title," "),t.R7$(2),t.SpI(" ",o.displayedText," "),t.R7$(),t.Y8G("ngIf",!o.storyBlock.isCombat))},dependencies:[d.Sq,d.bT,r.Jm,r.QW,r.b_,r.I9,r.ME,r.HW,r.tN,r.W9,r.eU,r.iq,r.uz,r.BC,r.ai]}),i})()}];let F=(()=>{var n;class i{}return(n=i).\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.$C({type:n}),n.\u0275inj=t.G2t({imports:[p.iI.forChild(_),p.iI]}),i})(),I=(()=>{var n;class i{}return(n=i).\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.$C({type:n}),n.\u0275inj=t.G2t({imports:[d.MD,y.YN,r.bv,F]}),i})()}}]);